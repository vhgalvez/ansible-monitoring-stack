---
# üß© install_stack.yml
# Playbook maestro para desplegar el stack de monitoreo completo en Kubernetes
# Ejecuta los pasos clave: herramientas locales, acceso al cl√∫ster y despliegue del stack.

- name: 1Ô∏è‚É£ Instalar herramientas locales necesarias (kubectl, pip, helm)
  import_playbook: playbooks/01_install_local_tools.yml

- name: 2Ô∏è‚É£ Configurar kubeconfig desde master con acceso por VIP
  import_playbook: playbooks/02_setup_kubeconfig.yml

- name: 3Ô∏è‚É£ Desplegar stack de monitoreo completo (Prometheus + Grafana)
  import_playbook: playbooks/03_install_monitoring_stack.yml

- name: 4Ô∏è‚É£ Instalar Node Exporter en m√°quinas externas (si aplica)
  import_playbook: playbooks/04_install_node_exporter.yml

- name: 5Ô∏è‚É£ Generar y aplicar configuraci√≥n de scrapes externos
  import_playbook: playbooks/05_update_scrape_targets.yml
