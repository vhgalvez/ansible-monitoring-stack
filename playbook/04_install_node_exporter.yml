---
# üì¶ 04_install_node_exporter.yml
# Instalaci√≥n y configuraci√≥n del servicio Node Exporter en m√°quinas externas para Prometheus

- name: üêß Instalar y configurar Node Exporter
  hosts: external_node_exporter
  become: true
  gather_facts: true

  vars:
    node_exporter_version: "{{ node_exporter_version }}"  # Usamos las variables definidas
    node_exporter_bin_dir: "{{ node_exporter_bin_dir }}"
    node_exporter_user: "{{ node_exporter_user }}"
    node_exporter_service_path: "{{ node_exporter_service_path }}"
    node_exporter_archive: "/tmp/node_exporter.tar.gz"
    node_exporter_src_dir: "/tmp/node_exporter-{{ node_exporter_version }}.linux-amd64"
    node_exporter_binary: "{{ node_exporter_src_dir }}/node_exporter"

  roles:
    - node_exporter