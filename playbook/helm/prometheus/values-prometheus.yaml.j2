---
# helm/prometheus/values-prometheus.yaml.j2
server:
  containerPort: 9091  # El puerto en el que el contenedor de Prometheus escuchará las solicitudes (por defecto 9091)

  extraArgs:
    web.listen-address: ":9091"  # Configuración para escuchar en el puerto 9091 para las conexiones web de Prometheus

  # Configuración del livenessProbe
  livenessProbe:
    httpGet:
      path: /-/healthy  # Endpoint de salud (para verificar si Prometheus está funcionando)
      port: 9091  # Puerto en el que se realiza la comprobación de la sonda
    initialDelaySeconds: 30  # Tiempo que espera Kubernetes antes de realizar la primera comprobación de liveness
    timeoutSeconds: 5  # Tiempo que espera Kubernetes para obtener una respuesta antes de considerar la comprobación como fallida
    periodSeconds: 10  # Frecuencia con la que Kubernetes realizará las comprobaciones
    failureThreshold: 3  # Número de fallos consecutivos necesarios antes de considerar al contenedor como no saludable

  # Configuración del readinessProbe
  readinessProbe:
    httpGet:
      path: /-/ready  # Endpoint de readiness (para verificar si Prometheus está listo para recibir tráfico)
      port: 9091  # Puerto en el que se realiza la comprobación de la sonda
    initialDelaySeconds: 30  # Tiempo que espera Kubernetes antes de realizar la primera comprobación de readiness
    timeoutSeconds: 3  # Tiempo que espera Kubernetes para obtener una respuesta antes de considerar la comprobación como fallida
    periodSeconds: 5  # Frecuencia con la que Kubernetes realizará las comprobaciones
    failureThreshold: 3  # Número de fallos consecutivos necesarios antes de considerar al contenedor como no listo para recibir tráfico