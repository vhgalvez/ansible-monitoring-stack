# vars/main.yml

# ğŸ“ Variables de configuraciÃ³n para el stack de monitoreo (Prometheus + Grafana)

# Credenciales generales de autenticaciÃ³n para Prometheus y Grafana
prometheus_auth_user: "{{ lookup('env', 'PROMETHEUS_AUTH_USER') }}"  # ObtenciÃ³n desde la variable de entorno
prometheus_auth_pass: "{{ lookup('env', 'PROMETHEUS_AUTH_PASS') }}"  # ObtenciÃ³n desde la variable de entorno

grafana_admin_user: "{{ lookup('env','GRAFANA_ADMIN_USER') }}"
grafana_admin_password: "{{ lookup('env','GRAFANA_ADMIN_PASS') }}"

# ğŸ› ï¸ Credenciales de autenticaciÃ³n para la interfaz de usuario (UI) de Prometheus y Grafana
prometheus_auth_user_ui: "{{ lookup('env', 'PROMETHEUS_AUTH_USER_UI') }}"  # ObtenciÃ³n desde la variable de entorno
prometheus_auth_pass_ui: "{{ lookup('env', 'PROMETHEUS_AUTH_PASS_UI') }}"  # ObtenciÃ³n desde la variable de entorno

grafana_auth_user_ui: "{{ lookup('env', 'GRAFANA_AUTH_USER_UI') }}"  # ObtenciÃ³n desde la variable de entorno
grafana_auth_pass_ui: "{{ lookup('env', 'GRAFANA_AUTH_PASS_UI') }}"  # ObtenciÃ³n desde la variable de entorno

# ğŸ·ï¸ Dominio y namespace donde se desplegarÃ¡n los Dashboards
grafana_domain: "grafana.socialdevs.site"
prometheus_domain: "prometheus.socialdevs.site"

monitoring_namespace: "monitoring"  # Namespace donde se desplegarÃ¡ Prometheus y Grafana

# Nombres del Middleware y Secret sellado para la autenticaciÃ³n bÃ¡sica
prometheus_dashboard_middleware_name: "prometheus-dashboard-auth"
grafana_dashboard_middleware_name: "grafana-dashboard-auth"
prometheus_secret_name: "prometheus-dashboard-auth"
grafana_secret_name: "grafana-dashboard-auth"

# ğŸŒ Ruta del kubeconfig y token de acceso al clÃºster (usado por kubectl/kubeseal)
kubeconfig_path: "/home/victory/.kube/config"
kubeconfig_token_path: "/home/victory/.kube/token.jwt"  # AsegÃºrate de que este archivo estÃ© bien protegido

# ğŸ”Œ DirecciÃ³n VIP del clÃºster Kubernetes (Ãºtil para balanceo o HA)
vip_kubernetes: "192.168.0.32"  # AsegÃºrate de que esta direcciÃ³n estÃ© correctamente configurada y accesible

# ğŸ”§ Ruta del binario kubectl y kubeseal
kubectl_path: "/usr/local/bin/kubectl"
kubeseal_path: "/usr/local/bin/kubeseal"  # AsegÃºrate de que kubeseal estÃ© correctamente instalado y accesible

# ğŸ”’ TLS Secret creado en Kubernetes
tls_secret_name: "wildcard-socialdevs-tls"  # El nombre del secret TLS debe ser definido aquÃ­

# ğŸŒ ConfiguraciÃ³n opcional de redirecciÃ³n automÃ¡tica HTTP -> HTTPS
http_to_https_redirect: true  # Si deseas redirigir automÃ¡ticamente todo el trÃ¡fico HTTP a HTTPS

# ğŸ“¦ ConfiguraciÃ³n del repositorio de Helm para Prometheus y Grafana
prometheus_chart_version: "27.23.0"
grafana_chart_version: "9.2.9"

# ğŸ› ï¸ ConfiguraciÃ³n de Prometheus y Grafana
prometheus_values_path: "playbook/helm/prometheus/values-prometheus.yaml.j2"
grafana_values_path: "playbook/helm/grafana/values-grafana.yaml.j2"

# ConfiguraciÃ³n para el almacenamiento de Grafana
grafana_storage_class: "longhorn"
grafana_pvc_size: "10Gi"  # O el tamaÃ±o preferido de PVC para Grafana