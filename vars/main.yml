# vars/main.yml

# 📝 Variables de configuración para el stack de monitoreo (Prometheus + Grafana)

# Credenciales generales de autenticación para Prometheus y Grafana
prometheus_auth_user: "{{ lookup('env', 'PROMETHEUS_AUTH_USER') }}"  # Obtención desde la variable de entorno
prometheus_auth_pass: "{{ lookup('env', 'PROMETHEUS_AUTH_PASS') }}"  # Obtención desde la variable de entorno

grafana_admin_user: "{{ lookup('env','GRAFANA_ADMIN_USER') }}"
grafana_admin_password: "{{ lookup('env','GRAFANA_ADMIN_PASS') }}"

# 🛠️ Credenciales de autenticación para la interfaz de usuario (UI) de Prometheus y Grafana
prometheus_auth_user_ui: "{{ lookup('env', 'PROMETHEUS_AUTH_USER_UI') }}"  # Obtención desde la variable de entorno
prometheus_auth_pass_ui: "{{ lookup('env', 'PROMETHEUS_AUTH_PASS_UI') }}"  # Obtención desde la variable de entorno

grafana_auth_user_ui: "{{ lookup('env', 'GRAFANA_AUTH_USER_UI') }}"  # Obtención desde la variable de entorno
grafana_auth_pass_ui: "{{ lookup('env', 'GRAFANA_AUTH_PASS_UI') }}"  # Obtención desde la variable de entorno

# 🏷️ Dominio y namespace donde se desplegarán los Dashboards
grafana_domain: "grafana.socialdevs.site"
prometheus_domain: "prometheus.socialdevs.site"

monitoring_namespace: "monitoring"  # Namespace donde se desplegará Prometheus y Grafana

# Nombres del Middleware y Secret sellado para la autenticación básica
prometheus_dashboard_middleware_name: "prometheus-dashboard-auth"
grafana_dashboard_middleware_name: "grafana-dashboard-auth"
prometheus_secret_name: "prometheus-dashboard-auth"
grafana_secret_name: "grafana-dashboard-auth"

# 🌐 Ruta del kubeconfig y token de acceso al clúster (usado por kubectl/kubeseal)
kubeconfig_path: "/home/victory/.kube/config"
kubeconfig_token_path: "/home/victory/.kube/token.jwt"  # Asegúrate de que este archivo esté bien protegido

# 🔌 Dirección VIP del clúster Kubernetes (útil para balanceo o HA)
vip_kubernetes: "192.168.0.32"  # Asegúrate de que esta dirección esté correctamente configurada y accesible

# 🔧 Ruta del binario kubectl y kubeseal
kubectl_path: "/usr/local/bin/kubectl"
kubeseal_path: "/usr/local/bin/kubeseal"  # Asegúrate de que kubeseal esté correctamente instalado y accesible

# 🔒 TLS Secret creado en Kubernetes
tls_secret_name: "wildcard-socialdevs-tls"  # El nombre del secret TLS debe ser definido aquí

# 🌐 Configuración opcional de redirección automática HTTP -> HTTPS
http_to_https_redirect: true  # Si deseas redirigir automáticamente todo el tráfico HTTP a HTTPS

# 📦 Configuración del repositorio de Helm para Prometheus y Grafana
prometheus_chart_version: "27.23.0"
grafana_chart_version: "9.2.9"

# 🛠️ Configuración de Prometheus y Grafana
prometheus_values_path: "playbook/helm/prometheus/values-prometheus.yaml.j2"
grafana_values_path: "playbook/helm/grafana/values-grafana.yaml.j2"

# Configuración para el almacenamiento de Grafana
grafana_storage_class: "longhorn"
grafana_pvc_size: "10Gi"  # O el tamaño preferido de PVC para Grafana